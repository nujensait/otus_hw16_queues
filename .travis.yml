# Required to run your project under the correct environment.
language: php

# Versions of PHP you want your project run with.
php:
  - 8.1

deploy:
  provider: pages
  skip_cleanup: true
  github_token: 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
  keep_history: true
  on:
    branch: main

sudo: required
services:
  - docker

env:
  COMPOSE_VERSION: 1.4.1

# Commands to be run before your environment runs.
before_script:
  - #composer self-update
  - #composer install --prefer-source --no-interaction --dev

before_install:
 - echo "begin deploy"

script:
  - #mv .env.example .env
  - #cd code && composer update && cd ../
  - #docker-compose build
  - #docker-compose down
  - #docker-compose up -d
  - echo "Build done"

# Customize when the notification emails are sent.
notifications:
  email: true
  on_success: never
  on_failure: always

